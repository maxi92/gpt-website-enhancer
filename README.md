# GPT网站增强器 (GPT Website Enhancer)

这是一个Chrome扩展，用于增强AI聊天网站（如ChatGPT和通义千问）的用户体验。

## 主要功能

### 1. Markdown转换
- 将AI聊天页面的对话内容转换为Markdown格式
- 支持一键复制所有对话内容
- 支持选择性复制部分对话内容
- 支持为生成的Markdown内容添加目录

### 2. 导航侧边栏

#### 基本布局
- 位于页面右侧
- 可调节宽度（默认400px，最小240px，最大700px）
- 包含顶部操作栏和内容区域
- 支持拖动调整宽度

#### 顶部操作栏
- 标题显示"对话导航"
- 包含"多选"和"复制选中"按钮
- "复制选中"按钮仅在多选模式下显示，并且在用户选中了至少一个对话以后才能够点击。点击之后将会将用户选中的的对话内容转换为markdown格式，并复制到剪贴板。

#### 对话内容展示
- 按组展示对话内容，每组包含一个问题和一个回答
- 每组对话都有编号（如"对话1"，"对话2"等）
- 问题和回答使用不同样式区分：
  - 问题：蓝色文本 (#2196F3)
  - 回答：绿色文本 (#4CAF50)
- 每组对话显示预览文本（最多2行，超出显示省略号）
- 勾选框仅在多选模式下显示

#### 交互功能
- 点击对话组可快速定位到原文位置
- 支持多选模式下批量选择对话
- 滚动条美化

### 3. 对话宽度调整
- 点击插件之后能够通过拖动对话宽度调整按钮来调整对话宽度，拖动到最左侧的时候，对话宽度最小，拖动到最右侧的时候，对话宽度最大，共有3个档位，分别为默认、较宽、最宽。

### 4. 网站适配

#### ChatGPT
- 适配URL: https://chat.openai.com/*
- 对话内容选择器: [具体选择器待定]
- 页面布局调整

#### 通义千问
- 适配URL: https://qianwen.aliyun.com/*
- 对话内容选择器: [具体选择器待定]
- 页面布局调整

## 技术实现要点

### 1. 消息通信
- 使用Chrome扩展的消息通道进行组件间通信
- 需要处理content script和popup之间的消息传递

### 2. 样式设计
- 使用CSS确保侧边栏样式不受原网站样式影响
- 实现响应式布局
- 确保z-index合理设置，避免被原网站元素遮挡

### 3. 状态管理
- 使用Chrome Storage API保存用户设置
- 记住侧边栏宽度等用户偏好
- 配置变更对同一个网站的多个页面生效，例如用户调整了对话宽度，那么当用户在同一个网站的多个页面之间切换的时候，对话宽度会自动调整到用户之前设置的宽度。
- 配置将会自动保存，即使关闭了浏览器，下次打开浏览器的时候，配置仍然有效。

### 4. 性能优化
- 优化DOM操作
- 使用节流函数处理拖动事件
- 优化滚动性能

## 使用的技术栈
- JavaScript (ES6+)
- Chrome Extension APIs
- CSS3
- HTML5

## 注意事项
1. 确保扩展不影响原网站的功能
2. 保持代码模块化，便于维护
3. 注意跨域和安全性问题
4. 保持良好的错误处理机制 